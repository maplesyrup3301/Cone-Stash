$$
\def\d{\text d} 
\def\b{\boldsymbol}
\def\o{\overline}
$$
# 数制与码制
## 数制
给定一个基数$S\geq2(S\in\mathbb{N_+})$，则任何实数$P$都可以唯一表示为和：
$$
P=\sum_{n=0}^\infty p_nS^n+\sum_{n=1}^\infty q_nS^{-n}
$$
取该和的系数将$P$表示为$P=(\overline{\dots p_i\dots p_2p_1p_0.q_0q_1q_2\dots q_k\dots})_S$，此种数字表示系统称为$S$进制；
为了叙述方便，本文将数$x$变换为其$S$进制表示$\o x$的映射记为：
$$
B_S:x\mapsto \o x_S
$$
虽然数本身的含义是恒定的，但是在不同数制中的表示不同，为了表示方便本文记十进制所表示的数为$[\o x_{10}]$，也即$[27]$表示数$27$本身，独立于任何进制；
由于二稳态元件的抗噪音能力强，在数字电路设计中我们使用二进制
十进制转换为二进制的通法是：连续使用带余除法将原数除以二直到被除数为零，随后将余数自下向上，自左向右排列得到原数的二进制表示；以$[27]$为例：
$$
\begin{aligned}[]
[28]\div[2]=[14]\cdots[0]\\
[14]\div[2]=[7]\cdots[0]\\
[7]\div[2]=[3]\cdots[1]\\
[3]\div[2]=[1]\cdots[1]\\
[1]\div[2]=[0]\cdots[1]\\
\Rightarrow (28)_{10}=(11100)_2
\end{aligned}
$$
给定一个固定长度为$N$的二进制数$B$，其可以的表示状态为全零到全一之间的任意状态；固定长度的二进制数溢出时舍弃数的最高位；
二进制数$B$代表了模$2^N$的一个整数加群的一个子群的代表元；因此
$$
\dot B_{2}(-k)\equiv \dot B_2(s\cdot2^N-k)(s\in\mathbb{Z})
$$
同时考察按位取反操作，发现对二进制数$K[k]$有关系$L[2^N-k-1]\equiv\ominus K$
综上我们得出：$\dot B_2(-k)\equiv \ominus K\oplus 1$；这就是负数的**补码**；这样我们便可以用加法计算减法了；
对于3位定长二进制数，其表如下：

| 编码  | 直读  | 补码对应数 |
| --- | --- | ----- |
| 000 | 0   | -8, 0 |
| 001 | 1   | -7, 1 |
| 010 | 2   | -6, 2 |
| 011 | 3   | -5, 3 |
| 100 | 4   | -4, 4 |
| 101 | 5   | -3, 5 |
| 110 | 6   | -2, 6 |
| 111 | 7   | -1, 7 |
而一般有符号数就以最高位为符号位，按符号取最小的补码对应数
## 码制
然而数的表示并不局限于数制转换产生的自然码制；通过人为重载数码的含义我们可以得到各种不同的码制，因其特性不同它们分别适用于不同的场景
下面是一些常见的编码：
### 十进制编码
十进制编码是满足自$0$至$9$的十进制数码进行编码的码制；
#### 恒权码
恒权码通过赋予每一位不同的恒权来表示数字，如8421码、2421码、5211码，其名称分别表示每一位数码所代表的值；
8421码就是二进制自然编码，又称BCD（Binary Coded Decimal）
#### 余3码
余3码按自然码制读出的数总比其所表示的数大3，例如$0$以$(0011)$表示；
余3码所代表的映射为：

$$
R_3: x\mapsto B_2(x+[3])
$$
余3码的特点：
1. （自动十进制进位）如果有$x+y=[10]$，则有：
$$
R_3(x)\oplus R_3(y)=B_2(x+y+[6])=B_2([16])=(10000)_2
$$
表示两数相加如果满十进位，则其余3码表示之和也自动进位到第5位；
2. （对10取补码就等于其反码）如果有$x+y=[9]$，则有：
$$
R_3(x)=R_3([9]-y)=B_2([12]-y)=-B_2(y+[3])=-R_3(y)
$$
这是由上面性质（1）自然得到的性质；
#### 格雷码
格雷码的特点是相邻数的编码间仅有一位数码不同；在卡诺图中有应用
要得到格雷码，用相应位置的取反代替重复的加一即可
# 逻辑运算
布尔代数中变量的值仅取$0$或$1$，包含有三种基本运算（逻辑门）：
1. 与（$A\cdot B$）：当且仅当$A, B$均为真时为真
2. 或（$A+B$）：当且仅当$A, B$均为假时为假
3. 非（$A'$）：$A$的逻辑值取反
通过组合运算，可以得到更多复杂的门
以下是一些基本公式：
- 与运算
$$
0\cdot A=0; 1\cdot A=A; A\cdot A=A; A\cdot A'=0
$$
与运算满足交换律，结合律 和 关于或运算的分配律
- 或运算
$$
0+A=A; 1+A=1; A+A=A; A+A'=1
$$
或运算满足交换律，结合律 和 关于与运算的分配律

**逻辑代数基本定理**：
1. 代入定理：任何逻辑式都是相等的，将等式中的变量代换为逻辑式等式依然成立
2. 反演定理：将逻辑式中的与、或互换，真、假互换，$1$、$0$互换，变量全部取反，就得到原逻辑式的取反
3. 对偶定理：将逻辑式中的与、或互换，真、假互换，$1$、$0$互换就得到原式的对偶式

对于逻辑函数$F(b_1, b_2\dots b_n)$，若将一个变量$b$或其反变量$b'$合记为$B$，记输入序列$S=\overline {b_1b_2\dots b_n}$
1. 形如$B_1B_2\dots B_n$的d为最小项
不难发现$n$项最小项有$2^n$个；
因为最小项全以与连接，故而只有当每一个变量或反变量为真时才为真，因此变量、反变量序列与一个输入序列一一对应，每个最小项仅当接受对应的输入序列时为真；例如$\overline{b_1b_2'b_3b_4}$对应输入序列$1011$.
注意到我们可以把单个变量展开为最小项：
$$
b_1=b_1(b_2+b_2')(b_3+b_3')\dots(b_n+b_n')
$$
因此可以把任意式子展开为最小项之和（SOP）的形式
从而每一项最小项对应的输入序列之集合就是该函数的真值集合

2. 形如$B_1+B_2+\dots+B_n$的为最大项
不难发现$n$项最大项有$2^n$个；
因为最大项全以或连接，故而只有当每一个变量或反变量为假时才为假，因此变量、反变量序列与一个输入序列一一对应，每个最大项仅当接受对应的输入序列时为假
注意到我们可以把单个变量展开为最大项：
$$
b_1=b_1+(b_2b_2')+(b_3b_3')+\dots+(b_nb_n')
$$
因此可以把任意式子展开为最大项之积（POS）的形式
从而每一项最大项对应的输入序列之集合就是该函数的假值集合

例如函数$F(A, B, C)=A'B+AB'C+BC'$可以展开为：
$$
F(A, B, C)=A'BC+A'BC'+AB'C+ABC'
$$
或者：
$$
F(A, B, C)=(A+B+C)(A'+B'+C)(A+B'+C')(A'+B'+C')
$$

联系二者的是**德摩根公式**
$$
(b_1b_2\dots b_n)'=b_1'+b_2'+\dots+b_n'
$$

又例如函数：$F(A, B)=A'+AB'+B$可以展开为：
$$
F(A, B)=A'B+A'B'+AB'+AB+A'B=AB+A'B+AB'+A'B'
$$
这说明$F(A, B)= 1$

逻辑式的标准形式或是最大项、最小项形式，或是与或形式，也就是最简乘积之和形式；下面我们介绍化简逻辑式的方法：
- 公式法：
1. $AB+AB'=A$
2. $A+AB=A$
3. $AB+A'C+BC=AB+A'C$
5. $A+A'B=A+B$
6. $A+A=A$
7. $A+A'=1$
公式法就是利用以上公式进行变换化简；
- 卡诺图法：
卡诺图是一种特别的真值表，其纵横方向上各输入采取的是格雷码表示，从而使得在表上邻近的格在逻辑上也是相邻的，从而可以依靠把图中的真值分划为方格的方法化简原式；
对于其中的无关项，可以在卡诺图中任意以真或假代替，应当代入合理的真值使卡诺图中的方框最大化。

与此同时，需要注意到现实中我们往往仅能使用一种门，门的输入也往往只有两个，这就需要我们作另外的变换，将其全部化为一种门。
# [门电路](门电路.md)
# 组合逻辑电路
组合逻辑电路的输出状态仅取决于当前输入，而不记忆任何状态；任何组合逻辑电路可以表述为一个逻辑函数：
$$
\b Y=F(\b A)
$$
给定任意的组合逻辑电路都可以写出上述的逻辑函数，从而完全确定了该电路的行为；
下面介绍一些常见的组合逻辑电路模块：
1. 编码器
编码器有一组输入，但一般允许且只允许一个输入有效
当一个输入有效，它给出该输入的二进制编码
对于普通编码器，任何其他的输入组合都是不允许的；当输入


1. 译码器
译码器是编码器的逆向器件；以3线-8线译码器74HC138为例：
![[74HC138数据选择器.png|200]]![[74HC138控制端.png|200]]
注意该译码器中低电平是有效态；任意输出端的逻辑函数为：
$$
	Y_5'=A_2A_1'A_0S_1(S_2'+S_3')
$$
其额外的控制端亦见上；当$(S_2'+S_3')=1$时，可以看作以$S_1$为输入，$A_0,A_1, A_2$寻址的数据分配器；下面展示的二-十进制译码器也是类似工作原理，不过输入超过九的编码是非法的。
![[二-十译码器.png|300]]
一种特殊的译码器是**显示译码器**，用来将数字显示在七段数码管上
3. 数据选择器
数据选择器就是通过地址确定某一输入端的输入为输出器件；显然地，对于4线输入，就需要2线地址；一个简单的带开关二选一数据选择器的逻辑函数为：
$$
Y=(D_0A_0'+D_1A_0)S
$$
4. 加法器
加法器是执行二进制加法的器件；基本器件是半加器，包含结果、进位两个输出端
$$
S=A \oplus B; CO=AB
$$
但是为了串接多个加法器，我们需要构建全加器，除了两个操作数之外，它还包括一个前进位输入接受一个来自前面一级的进位：
如此，我们可以串起多个全加器，得到多位加法器；
5. 数字比较器
数字比较器可以用来比较两个二进制数的大小；依据比较数的大小关系分别在对应三种情况的不同输出端输出信号；
$$
Y_{A>B}=AB'; Y_{A<B}=A'B; Y_{A=B}=A\odot B
$$
将多个比较器串联就可以比较多位二进制数的大小；

我们注意到，实际上数据选择器遍历了相应地址数大小的所有最小项，因此通过合理地连接数据选择器的端口，它可以模仿任何输入项数等于地址数的逻辑式的行为；

# 触发器
存储电路是可以存储输入状态的电路；
一种最简单的存储电路是SR锁存器，其结构和电路图如下：
![[RS锁存器.png|400]]
它有两个稳态，分别对应$R_D, S_D$**其中一个**为高电平时的情况；当没有输入，时保持状态，而不允许同时输入；$Q$与$Q'$端是反相的；$S_D$高时，$Q$输出高

触发器是由时钟信号控制的锁存器，仅当时钟信号来到时，锁存器才响应输入而动作；
通过在RS锁存器的输入端加时钟控制的门控，就得到一个电平触发的触发器
![[电平控制RS触发器.png|500]]
仅当时钟信号为高电平时，触发器按RS锁存器的行为响应输入；
![[电平控制D触发器.png|500]]
有时为了单端输入的需要还把RS锁存器的输入统合为一个输入$D$，随后分出$D$与$D'$来控制锁存器，称为D触发器；但是应当注意到**D触发器失去了保持状态的能力**，它的输出仅取决于最后一次时钟输入时D的状态；
这种触发方式的响应对象是电平，除此之外还有对边沿的响应；下图是通过两个电平D触发器搭建上升沿D触发器的示意图：
![[下降沿控制D触发器.png]]
如果我们换用RS触发器，则电路的输出就不仅仅取决于下边沿时的输出，而是取决于整个高电平段的输入；这就是脉冲触发的触发器
![[脉冲控制RS触发器.png]]
为了克服RS触发器同时输入高电平后输出不定的缺点，我们按照如下的电路设计得到JK触发器；
![[JK触发器.png]]
对于JK触发器，当输入均为高，则下一周期的输出是上一周期的取反；也就是说，如果保持输入均为高电平，则输出将与时钟信号同频率持续反转；
按照时钟控制下逻辑的不同，触发器可以分为RS触发器、D触发器、JK触发器与T触发器；
- RS触发器：$Q^\ast=S+R'Q(SR=0)$
![[SR触发特性.png|700]]
- D触发器：$Q^\ast=D$
![[D触发器特性.png|700]]
- JK触发器：$Q^\ast=JQ'+K'Q$
![[JK触发特性.png|700]]
- T触发器：$Q^\ast = TQ'+T'Q$
![[T触发特性.png|700]]

# 时序逻辑电路
时序逻辑电路的一般结构如下：
![[时序逻辑电路.png|300]]
其中的信号有输入信号$\b X$和输出信号$\b Y$；另外本文将$\b Z$称为回传信号，$\b Q$称为反馈信号；时序逻辑电路的行为可以由三个函数描述：
$$
\b Y=F[\b X, \b Q]; \b Z=G[\b X, \b Q]; Q^\ast=H[\b Z, \b Q]
$$
分别称为输出方程、驱动方程和状态方程；
所有触发器受控于同一时钟信号同步变化的称为同步时序逻辑电路，与之对应的有异步时序逻辑电路。
描述时序逻辑电路行为的一个方式是输入一个值，然后任电路演化并绘出电路在所有输出状态间的转换，称为状态转换表；将各状态化为图的形式就得到状态转换图；另一种描述方式是状态机流程图（SM图），用流程框图的形式表示时序电路的行为；除此之外，时序电路还可以用时序图描述。
下面我们介绍一些常见的时序逻辑电路的模块：
1. 移位寄存器
![[D触发器移位寄存器.png|500]]
上图是一个由四个D触发器构成的4位移位寄存器；每个时钟循环，寄存器都从串行输入接受一位数据，向串行输出输出一位数据，其它所有数据向输出端移动一位；另外，移位寄存器也可以用来进行并行-串行转换、在计算电路中执行左移、右移功能等。
![[74HC194A.png|700]]
上图是一个双向移位寄存器74HC194A的逻辑图；
当$S_1'S_0'=1$时，其工作在保持状态；
当$S_1S_0'=1$时，其工作在右移状态；
当$S_1'S_0=1$时，其工作在左移状态；
当$S_1S_0=1$时，其工作在并行输入状态；
当$R_D'=0$，数据将被全部置零，因此正常工作时应该有$R_D'=1$
![[双向移位寄存器.png|500]]
74HC194A可以接成多位双向移位寄存器。

2. 计数器
- 同步二进制计数器
构造同步二进制计数器一般用T触发器，方式主要有两种：一是使该反转的位$T=1$，二是使时钟信号仅能到达该反转的触发器
![[同步二进制计数器.png|300]]
上图就是一个同步四位二进制计数器，构造运用了方法一；二进制计数器中各位的输出频率是时钟频率的$2^n$分之一，因此也叫做分频器
![[Pasted image 20240625001709.png|300]]
上图是一个二进制减法计数器的结构图，它通过控制触发（方式二）来完成计数；
下图是74161计数器的电路图：
![[Pasted image 20240703132642.png|400]]
下面是两个四位二进制加减计数器的结构：左图为74LS191，右图为74LS193；前者是单时钟，后者是双时钟（加、减时钟分线）；
![[Pasted image 20240625001830.png|350]]![[Pasted image 20240625001852.png|350]]
- 同步十进制计数器
同步十进制计数器是在同步二进制计数器的基础上改造而成的。下面是74160的结构图。
![[Pasted image 20240703132544.png|400]]
- 异步二进制计数器

- 异步十进制计数器

**构成任意进制计数器的方法**：
- 减小进制
例如用一个四位二进制计数器改装成十进制计数器
（方法一 异步置零法）
![[Pasted image 20240703130949.png|500]]
（方法二 置数法）
注意到如果置数端是异步的就要接1010而同步则接1001
![[Pasted image 20240703131222.png|500]]
（方法三 进位置数法）
![[Pasted image 20240703131430.png|500]]
- 增大进制
例如用两个四位二进制计数器改装成二十七进制计数器
![[Pasted image 20240703132125.png|600]]
3. 顺序脉冲发生器
顺序脉冲发生器可以使用移位寄存器构成环形寄存器，其缺点是无法自启动；
![[Pasted image 20240703133410.png|500]]
或者使用计数器+译码器的组合构成；同时为了消除冒险-竞争现象，有时我们也在译码器上加选通脉冲以滤除毛刺；
![[Pasted image 20240703133424.png|350]]
4. 序列信号发生器
序列信号发生器可以通过数据选择器+计数器遍历输入端的方式构成，而设置输出序列仅需要在输入端提前排好信号序列即可；
![[Pasted image 20240703133706.png|400]]
# 数模转换与模数转换
## 数模转换
下面是一些常见的数模转换电路：
1. 权电阻网络转换器
![[Pasted image 20240703133959.png|500]]
其缺点是所用的电阻阻值范围太大，就导致难以构建多位的转换器
2. 倒T形网络转换器
倒T形网络转换器克服了权电阻网络电阻阻值变化过大的这一缺点
![[Pasted image 20240703141622.png|500]]

数模转换器的转换精度计算为最小分辨电压比上最大输出电压；理论上$n$位数模转换器的转换精度（分辨率）为$(2^n-1)^{-1}$；实际上由于转换误差的存在，并不能简单认为实际精度就是分辨率；
转换误差常常用最小分辨电压$LSB$衡量
实际的转换误差包括比例系数误差（$V_{REF}$波动）、平移误差（运放零点漂移）和非线性误差
其中，比例系数误差根据转换公式：
$$
V=2^{-m-1}V_{REF}\sum_{n=0}^md_n2^n
$$
可知其误差正比于$\Delta V_{REF}$
## 模数转换
（**取样定理**）为了保证能够从数字信号中恢复出模拟信号，应当保证采样频率大于等于输入模拟信号最高频率分量的两倍，一般取3至5倍
为了将模拟信号转化为数字信号，要求我们对模拟信号作出量化。量化过程的最小分辨率称为量化单位。下面是两种划分量化电平的方式。
![[Pasted image 20240703153515.png]]
如果采用方法一进行量化，则量化误差最大为$\Delta$.
如果采用方法二进行量化，则量化误差最大仅为$0.5\Delta$，因为此时转换出的模拟电压位于每一个量化电平的中间.
下图是并联比较型A/D转换电路
![[Pasted image 20240703154235.png||500]]
理论上一个$n$位的A/D转换器能区分$2^n$个等级的输入电压；其分辨率为$2^{-n}$

